<!-- Set from config but allow override -->
{% set discourse = config.extra.discourse %}
{% if page and page.meta %}
  {% set showforum = page.meta.showforum %}
  {% set projectname = page.meta.projectname %}
{% endif %}

<!-- Discourse integration -->
{% if discourse and showforum %}
  <h2 id="__comments">Comments & Questions</h2>
  <p class="mb-5">This is the discussion around the {{ projectname }} in our <a href = {{ discourse }} target="_blank">community forums</a>! ðŸ‘‹</br>Check it, and if you have any question, let the community know below! ðŸ‘‡</p>
  <div id="discourse-comments"></div>
  <script type="text/javascript">
    window.DiscourseEmbed = { discourseUrl: '{{ discourse }}', discourseEmbedUrl: '{{ page.canonical_url }}' };
    (function() {
      var d = document.createElement('script'); d.type = 'text/javascript'; d.async = true;
      d.src = window.DiscourseEmbed.discourseUrl + 'javascripts/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(d);
    })();
  </script>
{% endif %}
